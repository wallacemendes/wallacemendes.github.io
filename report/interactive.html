<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisador Interativo de Estratégias de Teste: Playwright & Gherkin</title>
    
    <!-- Chosen Palette: Calm Corporate Blue -->
    <!-- Application Structure Plan: A dashboard-style SPA. The user is first presented with the final recommendation and a high-level visual comparison (radar chart) of the three scenarios. Below, an interactive "deep dive" section allows users to click on each scenario to view its detailed description, pros, cons, and code examples in a structured, easy-to-digest format. This prioritizes quick understanding and decision-making over linear reading, enabling users to explore the 'why' behind the recommendation on demand. A final section summarizes best practices as actionable takeaways. -->
    <!-- Visualization & Content Choices: The core comparative data from the report's table is visualized using a Chart.js Radar Chart to provide an immediate, holistic comparison of the scenarios across multiple criteria (Goal: Compare). Pros and Cons for each scenario are presented in clear, icon-driven lists for quick scanning (Goal: Inform/Compare). Conceptual code examples are placed within a tabbed interface for each scenario's detail view to keep the UI clean while providing context on demand (Goal: Organize). All interactions are handled with vanilla JS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            color: #334155;
        }
        .section-title {
            color: #0f172a;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
        }
        .card.active, .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
            border-color: #3b82f6;
        }
        .tab.active {
            border-color: #3b82f6;
            color: #3b82f6;
            background-color: #eff6ff;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .chart-container {
            position: relative;
            margin: auto;
            height: 50vh;
            max-height: 450px;
            width: 100%;
            max-width: 600px;
        }
        .pro-con-list li {
            padding-left: 1.5rem;
            position: relative;
        }
        .pro-con-list li::before {
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            position: absolute;
            left: 0;
            top: 4px;
        }
        .pro-list li::before {
            content: '\f164'; /* thumbs-up */
            color: #10b981;
        }
        .con-list li::before {
            content: '\f165'; /* thumbs-down */
            color: #ef4444;
        }
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', "Liberation Mono", "Courier New", monospace;
            font-size: 0.875rem;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8">

        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-3xl md:text-4xl font-bold section-title">Analisador Interativo de Estratégias de Teste</h1>
            <p class="text-lg md:text-xl text-slate-500 mt-2">Playwright & Gherkin: Uma Análise Visual para sua Decisão</p>
        </header>

        <!-- Main Dashboard -->
        <main>
            <!-- High-level Recommendations & Chart -->
            <section class="mb-16">
                <h2 class="text-2xl font-bold section-title text-center mb-8">Visão Geral e Comparativo</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                    <!-- Recommendation Cards -->
                    <div class="space-y-4">
                        <div class="card p-5 border-l-4 border-blue-500">
                            <h3 class="font-bold text-lg text-blue-800">Recomendação Principal</h3>
                            <p class="text-slate-600 mt-1">O <strong>Cenário 3 (Playwright Puro)</strong> oferece o melhor balanço entre simplicidade, manutenção e performance, utilizando recursos nativos para uma legibilidade eficaz.</p>
                        </div>
                        <div class="card p-5 border-l-4 border-emerald-500">
                            <h3 class="font-bold text-lg text-emerald-800">Alternativa Forte</h3>
                            <p class="text-slate-600 mt-1">O <strong>Cenário 1 (playwright-bdd)</strong> é ideal se Gherkin formal for um requisito inegociável, pois mantém todos os benefícios do executor Playwright.</p>
                        </div>
                        <div class="card p-5 border-l-4 border-red-500">
                            <h3 class="font-bold text-lg text-red-800">Menos Recomendado</h3>
                            <p class="text-slate-600 mt-1">O <strong>Cenário 2 (Cucumber)</strong> aumenta a complexidade e sacrifica funcionalidades cruciais do Playwright, sendo a opção menos vantajosa.</p>
                        </div>
                    </div>
                    <!-- Radar Chart -->
                    <div class="card p-4">
                        <div class="chart-container">
                            <canvas id="scenarioChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Deep Dive Section -->
            <section id="deep-dive" class="mb-16">
                <h2 class="text-2xl font-bold section-title text-center mb-8">Análise Detalhada dos Cenários</h2>
                
                <!-- Scenario Selector -->
                <div id="scenario-selector" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div id="card-1" class="card p-6 text-center cursor-pointer border-2 border-transparent">
                        <h3 class="text-xl font-semibold text-slate-800">Cenário 1</h3>
                        <p class="mt-1 text-blue-600 font-medium">Playwright + playwright-bdd</p>
                    </div>
                    <div id="card-2" class="card p-6 text-center cursor-pointer border-2 border-transparent">
                        <h3 class="text-xl font-semibold text-slate-800">Cenário 2</h3>
                        <p class="mt-1 text-red-600 font-medium">Playwright + Cucumber</p>
                    </div>
                    <div id="card-3" class="card p-6 text-center cursor-pointer border-2 border-transparent active">
                        <h3 class="text-xl font-semibold text-slate-800">Cenário 3</h3>
                        <p class="mt-1 text-emerald-600 font-medium">Playwright Puro</p>
                    </div>
                </div>

                <!-- Scenario Details Container -->
                <div id="scenario-details-container">
                    <!-- Details will be injected here by JS -->
                </div>
            </section>

            <!-- Best Practices Section -->
            <section>
                <h2 class="text-2xl font-bold section-title text-center mb-8">Boas Práticas e Próximos Passos</h2>
                <div class="card p-8">
                    <p class="mb-6">Independentemente do cenário escolhido, o sucesso do projeto depende da adoção de boas práticas. Considere os seguintes pontos como fundamentais para uma automação robusta e manutenível:</p>
                    <ul class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-slate-600">
                        <li class="flex items-start"><i class="fa-solid fa-file-code text-blue-500 text-xl mr-3 mt-1"></i><span><strong>Page Object Model (POM):</strong> Essencial para organizar seletores e ações, tornando os testes mais legíveis e fáceis de manter.</span></li>
                        <li class="flex items-start"><i class="fa-solid fa-puzzle-piece text-blue-500 text-xl mr-3 mt-1"></i><span><strong>Fixtures Customizadas:</strong> Abstraia lógicas de setup complexas (ex: login, criação de dados) para reutilização entre testes.</span></li>
                        <li class="flex items-start"><i class="fa-solid fa-network-wired text-blue-500 text-xl mr-3 mt-1"></i><span><strong>Testes de API para Setup:</strong> Use a API para preparar o estado da aplicação. É muito mais rápido e estável que interações de UI.</span></li>
                        <li class="flex items-start"><i class="fa-solid fa-database text-blue-500 text-xl mr-3 mt-1"></i><span><strong>Gerenciamento de Dados:</strong> Tenha uma estratégia clara para criar e limpar dados de teste, evitando dependências entre execuções.</span></li>
                        <li class="flex items-start"><i class="fa-solid fa-cogs text-blue-500 text-xl mr-3 mt-1"></i><span><strong>Integração Contínua (CI/CD):</strong> Integre seus testes ao pipeline para obter feedback rápido e constante sobre a qualidade do código.</span></li>
                        <li class="flex items-start"><i class="fa-solid fa-magnifying-glass-chart text-blue-500 text-xl mr-3 mt-1"></i><span><strong>Ferramentas de Depuração:</strong> Capacite a equipe a usar o Trace Viewer, UI Mode e o Inspector para resolver problemas rapidamente.</span></li>
                    </ul>
                </div>
            </section>

        </main>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // --- DATA ---
        const scenariosData = {
            '1': {
                title: 'Playwright + Gherkin (Sem Cucumber)',
                color: '#3b82f6',
                description: 'Esta abordagem utiliza uma biblioteca de terceiros (`playwright-bdd`) para converter arquivos Gherkin `.feature` em testes Playwright padrão. Isso permite que a equipe escreva testes em linguagem de negócio, mas executando-os com toda a potência do executor nativo do Playwright.',
                pros: [
                    'Mantém 100% dos benefícios do executor de testes Playwright (performance, trace viewer, UI mode, etc.).',
                    'Permite o uso da sintaxe Gherkin formal, facilitando a colaboração com a área de negócio.',
                    'Configuração geralmente mais simples que a integração completa com Cucumber.',
                    'Projeto em desenvolvimento ativo com funcionalidades adicionais.'
                ],
                cons: [
                    'Adiciona uma dependência externa ao projeto, o que exige avaliação de sua manutenibilidade a longo prazo.',
                    'Requer um passo de "build" adicional (`npx bddgen`) para gerar os arquivos de teste.',
                    'Introduz uma camada de abstração que pode, em casos raros, complicar a depuração.',
                    'Pequena curva de aprendizado para entender as convenções da biblioteca.'
                ],
                codeExamples: {
                    'login.feature': `Feature: Login de Usuário\n\n  Scenario: Login com credenciais válidas\n    Given estou na página de login\n    When eu preencho o email com "usuario@exemplo.com"\n    And eu preencho a senha com "senha123"\n    And eu clico em "Entrar"\n    Then eu devo ver a mensagem "Bem-vindo!"`,
                    'login.steps.ts': `import { createBdd } from 'playwright-bdd';\nimport { expect } from '@playwright/test';\n\nconst { Given, When, Then } = createBdd();\n\nGiven('estou na página de login', async ({ page }) => {\n  await page.goto('/login');\n});\n\nWhen('eu preencho a senha com {string}', async ({ page }, password) => {\n  // code to fill password\n});\n\nThen('eu devo ver a mensagem {string}', async ({ page }, message) => {\n  await expect(page.locator(\`text=\${message}\`)).toBeVisible();\n});`
                }
            },
            '2': {
                title: 'Playwright + Cucumber',
                color: '#ef4444',
                description: 'A abordagem BDD tradicional, onde o Cucumber.js atua como o executor principal dos testes, lendo os arquivos `.feature`. O Playwright é utilizado apenas como uma biblioteca para automatizar as interações com o navegador dentro das definições de steps do Cucumber.',
                pros: [
                    'Utiliza o framework BDD mais maduro e conhecido do mercado, com vasta comunidade e documentação.',
                    'Analisador (parser) de Gherkin extremamente robusto, suportando todas as suas funcionalidades avançadas.',
                    'Separação muito clara entre as especificações de comportamento (negócio) e o código de automação (técnico).',
                    'Ecossistema rico de formatadores de relatório que são facilmente compartilháveis.'
                ],
                cons: [
                    'PERDA SIGNIFICATIVA dos principais benefícios do executor de testes Playwright (paralelismo, fixtures, retentativas, UI mode, etc).',
                    'AUMENTA A COMPLEXIDADE da stack tecnológica, adicionando mais uma ferramenta principal para configurar e manter.',
                    'Exige a criação e manutenção de um "código de cola" (glue code) que pode se tornar verboso e difícil de gerenciar.',
                    'Opinião mista na comunidade Playwright; frequentemente visto como uma camada de abstração desnecessária.'
                ],
                 codeExamples: {
                    'login.feature': `Feature: Login de Usuário\n\n  Scenario: Login com credenciais válidas\n    Given estou na página de login\n    When eu preencho o email com "usuario@exemplo.com"\n    And eu preencho a senha com "senha123"\n    And eu clico em "Entrar"\n    Then eu devo ver a mensagem "Bem-vindo!"`,
                    'login_steps.js': `const { Given, When, Then } = require('@cucumber/cucumber');\nconst { expect } = require('@playwright/test');\n\n// 'this.page' viria do World context do Cucumber, \n// que precisa ser configurado manualmente nos hooks.\n\nGiven('estou na página de login', async function () {\n  await this.page.goto('/login');\n});\n\n// ... outras definições de step ...`
                }
            },
            '3': {
                title: 'Playwright Puro',
                color: '#10b981',
                description: 'Esta abordagem utiliza exclusivamente os recursos nativos do Playwright para escrever e organizar os testes. A legibilidade e a estrutura BDD-like são alcançadas através de boas práticas e funcionalidades como `test.describe()`, `await test.step()` e Page Object Model (POM).',
                pros: [
                    'MÁXIMA SIMPLICIDADE da stack tecnológica e menor sobrecarga de manutenção.',
                    'Performance otimizada e acesso total e irrestrito a todo o ecossistema Playwright.',
                    'Maior facilidade para encontrar talentos, pois o foco é apenas em JS/TS e Playwright.',
                    'Relatórios (especialmente o Trace Viewer) criam uma "documentação viva" da execução do teste, detalhando cada passo.'
                ],
                cons: [
                    'Não utiliza a sintaxe Gherkin em arquivos `.feature` formais, o que pode ser uma barreira para a área de negócio.',
                    'A legibilidade dos testes depende fortemente da disciplina da equipe em aplicar boas práticas de codificação (nomes, steps, POM).',
                    'A colaboração com a área de negócio precisa ocorrer no nível do código de teste ou dos relatórios gerados.'
                ],
                 codeExamples: {
                    'login.spec.ts': `import { test, expect } from '@playwright/test';\nimport { LoginPage } from './pages/loginPage'; // Exemplo de POM\n\ntest.describe('Feature: Login de Usuário', () => {\n  let loginPage: LoginPage;\n\n  test.beforeEach(async ({ page }) => {\n    loginPage = new LoginPage(page);\n    await test.step('Dado que o usuário está na página de login', async () => {\n      await loginPage.navigateTo();\n    });\n  });\n\n  test('Cenário: Login com credenciais válidas', async ({ page }) => {\n    await test.step('Quando preencho credenciais válidas', async () => {\n      await loginPage.fillEmail('usuario@exemplo.com');\n      await loginPage.fillPassword('senha123');\n    });\n    await test.step('E clico em "Entrar"', async () => {\n      await loginPage.clickLoginButton();\n    });\n    await test.step('Então devo ver a mensagem de boas-vindas', async () => {\n      await expect(page.locator('text=Bem-vindo!')).toBeVisible();\n    });\n  });\n});`
                }
            }
        };

        const chartData = {
            labels: [
                'Simplicidade da Stack', 
                'Baixa Manutenção', 
                'Retenção Benefícios PW', 
                'Performance', 
                'Legibilidade de Negócio', 
                'Facilidade de Contratação'
            ],
            datasets: [{
                label: 'Cenário 1: playwright-bdd',
                data: [3, 3, 5, 4, 5, 3], // Scores 1-5
                borderColor: scenariosData['1'].color,
                backgroundColor: 'rgba(59, 130, 246, 0.2)',
                borderWidth: 2,
                pointBackgroundColor: scenariosData['1'].color,
            }, {
                label: 'Cenário 2: Cucumber',
                data: [1, 1, 1, 2, 5, 2],
                borderColor: scenariosData['2'].color,
                backgroundColor: 'rgba(239, 68, 68, 0.2)',
                borderWidth: 2,
                pointBackgroundColor: scenariosData['2'].color,
            }, {
                label: 'Cenário 3: Playwright Puro',
                data: [5, 5, 5, 5, 3, 5],
                borderColor: scenariosData['3'].color,
                backgroundColor: 'rgba(16, 185, 129, 0.2)',
                borderWidth: 2,
                pointBackgroundColor: scenariosData['3'].color,
            }]
        };

        // --- CHART.JS ---
        const ctx = document.getElementById('scenarioChart').getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'radar',
            data: chartData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: '#e2e8f0' },
                        grid: { color: '#e2e8f0' },
                        pointLabels: {
                            font: { size: 12, weight: '500' },
                            color: '#475569'
                        },
                        ticks: {
                            color: '#64748b',
                            backdropColor: 'rgba(255, 255, 255, 0.75)',
                            stepSize: 1,
                            beginAtZero: true,
                            max: 5
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            font: { size: 12, weight: '500' },
                            color: '#334155'
                        }
                    },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                // tooltipItems is an array, take the first item
                                const item = tooltipItems[0];
                                // Access the label using the item's datasetIndex and dataIndex
                                let label = item.chart.data.labels[item.dataIndex];
                                // Check if the label is an array (multiline)
                                if (Array.isArray(label)) {
                                    // Join the array elements with a space for display
                                    return label.join(' ');
                                } else {
                                    // If it's a single line label, return it as is
                                    return label;
                                }
                            }
                        }
                    }
                }
            }
        });

        // --- INTERACTIVITY ---
        const selector = document.getElementById('scenario-selector');
        const detailsContainer = document.getElementById('scenario-details-container');

        function renderScenarioDetails(scenarioId) {
            const data = scenariosData[scenarioId];
            if (!data) return;

            const prosHtml = data.pros.map(pro => `<li>${pro}</li>`).join('');
            const consHtml = data.cons.map(con => `<li>${con}</li>`).join('');

            let codeTabsHtml = '';
            let codePanelsHtml = '';
            let isFirstCodeTab = true;

            for (const [fileName, code] of Object.entries(data.codeExamples)) {
                const activeClass = isFirstCodeTab ? 'active' : '';
                codeTabsHtml += `<button class="tab py-2 px-4 border-b-2 font-medium text-slate-500 ${activeClass}" data-tab="${fileName}">${fileName}</button>`;
                codePanelsHtml += `<div class="tab-content mt-4 ${activeClass}" id="tab-content-${fileName}">
                                      <div class="code-block">${code.replace(/</g, "&lt;").replace(/>/g, "&gt;")}</div>
                                   </div>`;
                isFirstCodeTab = false;
            }

            detailsContainer.innerHTML = `
                <div class="card p-6 md:p-8">
                    <h3 class="text-2xl font-bold" style="color: ${data.color}">${data.title}</h3>
                    <p class="mt-2 mb-6 text-slate-600">${data.description}</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                        <div>
                            <h4 class="font-semibold text-lg mb-3 flex items-center text-emerald-700"><i class="fa-solid fa-circle-plus mr-2"></i> Vantagens</h4>
                            <ul class="space-y-2 text-sm text-slate-600 pro-con-list pro-list">${prosHtml}</ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg mb-3 flex items-center text-red-700"><i class="fa-solid fa-circle-minus mr-2"></i> Desvantagens</h4>
                            <ul class="space-y-2 text-sm text-slate-600 pro-con-list con-list">${consHtml}</ul>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-lg mb-3 text-slate-700">Exemplos de Código Conceituais</h4>
                        <div class="border-b border-slate-200">
                            ${codeTabsHtml}
                        </div>
                        <div>
                            ${codePanelsHtml}
                        </div>
                    </div>
                </div>`;
                
            // Add event listeners for the new tabs
            const tabsContainer = detailsContainer.querySelector('.border-b');
            tabsContainer.addEventListener('click', (e) => {
                if(e.target.classList.contains('tab')) {
                    const tabName = e.target.dataset.tab;
                    tabsContainer.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
                    e.target.classList.add('active');

                    detailsContainer.querySelectorAll('.tab-content').forEach(panel => panel.classList.remove('active'));
                    document.getElementById(`tab-content-${tabName}`).classList.add('active');
                }
            });
        }

        selector.addEventListener('click', function(e) {
            const card = e.target.closest('.card');
            if (!card) return;

            const scenarioId = card.id.split('-')[1];

            // Update active card
            selector.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
            card.classList.add('active');

            // Render details
            renderScenarioDetails(scenarioId);

            // Scroll to the deep dive section smoothly
             document.getElementById('deep-dive').scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        // Initial render
        renderScenarioDetails('3'); // Default to showing scenario 3
    });
</script>

</body>
</html>
